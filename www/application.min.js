var bkkssApplication=angular.module("bkkss",["ui.router","ui.bootstrap","ngAnimate","bkkss.controllers","bkkss.services","bkkss.filters","bkkss.directives"]),bkkssControllers=angular.module("bkkss.controllers",[]),bkkssServices=angular.module("bkkss.services",[]),bkkssFilters=angular.module("bkkss.filters",[]),bkkssDirectives=angular.module("bkkss.directives",[]);bkkssApplication.run(["$rootScope",function(e){e.$on("$stateChangeStart",function(t,r){e.sectionTitle=r.title,e.pageTitle=r.title+" - 佛教覺光法師中學校友會"})}]).config(["$stateProvider","$locationProvider","$urlRouterProvider",function(e,t,r){e.state("site",{url:"/Site",abstract:!0,templateUrl:"pages/layout/main.html",controller:"LayoutCtrl"}).state("site.home",{url:"/Home",title:"最新消息",views:{mainContent:{templateUrl:"pages/home/home.html",controller:"HomeCtrl"}}}).state("site.members",{url:"/Members",title:"歷年成員名單",views:{mainContent:{templateUrl:"pages/members/members.html",controller:"MembersCtrl"}}}).state("site.galleries",{url:"/Galleries",title:"我們的相冊",views:{mainContent:{templateUrl:"pages/galleries/galleries.html",controller:"GalleriesCtrl"}}}).state("site.contact-us",{url:"/ContactUs",title:"聯絡我們",views:{mainContent:{templateUrl:"pages/contact-us/contact-us.html"}}}),r.otherwise("/Site/Home"),t.html5Mode(!0)}]),bkkssDirectives.directive("gallery",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{images:"=",pathPrefix:"@"},controller:["$scope","$element","$attrs",function(e,t,r){var l=e.images.length;e.maximumIndex=l,e.currentIndex=0,e.nextImage=function(){e.currentIndex=e.currentIndex+1,e.currentIndex>=l&&(e.currentIndex=0)},e.previousImage=function(){e.currentIndex=e.currentIndex-1,e.currentIndex<0&&(e.currentIndex=l-1)}}],template:"<div class='gallery'><div class='gallery-pager'>{{currentIndex + 1}}&nbsp;/&nbsp;{{maximumIndex}}</div><div class='gallery-left-navigator' ng-click='previousImage()'></div><div class='gallery-vertical-helper'></div><div class='stage'><img ng-repeat='(key, image) in images' ng-if='key == currentIndex' ng-src='{{pathPrefix}}{{image.real}}'></div><div class='gallery-right-navigator' ng-click='nextImage()'></div></div>"}}]),bkkssControllers.controller("GalleriesCtrl",["$scope","$http","$uibModal",function(e,t,r){t({method:"GET",url:"/json/galleries.json"}).then(function(t){var r=t.data;r.sort(function(e,t){return e.Year<t.Year?1:e.Year>t.Year?-1:0}),e.galleries=r}),e.openGalleryModal=function(e,t){r.open({animation:!0,templateUrl:"pages/modals/gallery.html",size:"lg",controller:"GalleryCtrl",resolve:{title:function(){return e},images:function(){return t}}})}}]),bkkssControllers.controller("HomeCtrl",["$scope","$http","$uibModal",function(e,t,r){t({method:"GET",url:"/json/galleries.json"}).then(function(t){var r=t.data;e.galleries=r.sort(function(e,t){return e.Year<t.Year?1:e.Year>t.Year?-1:0}).slice(0,4)}),t({method:"GET",url:"/json/news.json"}).then(function(t){var r=t.data;e.newsItems=r}),e.openNewsItemModal=function(e){r.open({animation:!0,templateUrl:"pages/modals/news-item.html",size:"lg",controller:"NewsItemCtrl",resolve:{newsItem:function(){return e}}})}}]),bkkssControllers.controller("LayoutCtrl",["$scope","$rootScope","$uibModal","$window",function(e,t,r,l){e.isOpened=!1,e.menu=[{title:"最新消息",path:"site.home"},{title:"歷年成員名單",path:"site.members"},{title:"我們的相冊",path:"site.galleries"},{title:"聯絡我們",path:"site.contact-us"}],t.$on("$viewContentLoaded",function(t,r){e.isOpened=!1,l.scrollTo(0,0)})}]),bkkssControllers.controller("MembersCtrl",["$scope","$http","$uibModal",function(e,t,r){t({method:"GET",url:"/json/members.json"}).then(function(t){var r=t.data;e.associations=r})}]),bkkssControllers.controller("GalleryCtrl",["$scope","$uibModalInstance","title","images",function(e,t,r,l){e.title=r,e.images=l,e.closeModal=function(){t.dismiss("cancel")}}]),bkkssControllers.controller("NewsItemCtrl",["$scope","$uibModalInstance","newsItem",function(e,t,r){e.newsItem=r,e.closeModal=function(){t.dismiss("cancel")}}]);